
# https://github.com/cheat/cheatsheets
- name: awk
  keybinds:
    - name: "use entire devices rather than partitions"
      key: "zpool create $pool raidz1 $device $device $device [...]"
    - name: "Add 2nd-level RAID-1 (mirror) ZFS Intent Log (ZIL; synchronous write cache)"
      key: "zpool add $pool log mirror $part $part"
    - name: "Add 2nd-level RAID-0 Adaptive Replacement Cache (ARC; read cache)"
      key: "zpool add $pool cache $part $part [...]"
    - name: "Remove log or cache components"
      key: "zpool remove zfs $part [...]"
    - name: "Import (enable) existing pool from newly connected devices"
      key: "zpool import -d /dev/disk/by-id -aN"
    - name: "Import (enable) existing pool using the devices cache"
      key: "zpool import -c /etc/zfs/zpool.cache -aN"
    - name: "Export (disable) pool (e.g. before shutdown)"
      key: "zpool export -a"
    - name: "List all (imported) pools"
      key: "zpool list"
    - name: "See pool status"
      key: "zpool status $pool"
    - name: "See detailed pool I/O statistics"
      key: "zpool iostat $pool -v"
    - name: "Verify pool integrity (data checksums)"
      key: "zpool scrub $pool"
    - name: "Remove a failing device from a pool"
      key: "zpool detach $pool $device"
    - name: "Replace a failed device in a pool"
      key: "zpool replace $pool ${failed-device} ${new-device}"
    - name: "Erase zpool labels (superblock) from a device/partition"
      key: "zpool labelclear $device"
    - name: "Query pool configuration (properties)"
      key: "zpool get all $pool"
    - name: "Change pool configuration (property)"
      key: "zpool set <property>=<value> $pool"
    - name: "Dump the entire pool (commands) history"
      key: "zpool history $pool"
    - name: "Create a new file system"
      key: "zfs create $pool/${fs_vol}"
    - name: "Create a new volume block device"
      key: "zfs create -V <size> $pool/${fs_vol}"
    - name: "List all file systems / volumes"
      key: "zfs list"
    - name: "Mount all file systems"
      key: "zfs mount -a"
    - name: "Create a snapshot"
      key: "zfs snapshot $pool/${fs_vol}@$snapshot"
    - name: "Delete a snapshot"
      key: "zfs destroy $pool/${fs_vol}@$snapshot"
    - name: "Full backup"
      key: "zfs send -p -R $pool/${fs_vol}@$snapshot"
    - name: "... on destination:"
      key: "zfs receive -F $pool/${fs_vol}"
    - name: "Incremental backup"
      key: "zfs send -p -R -i $pool/${fs_vol}@${snapshot-previous} $pool/${fs_vol}@$snapshot"
    - name: "Query file system / volume configuration (properties)"
      key: "zfs get all $pool/${fs_vol}"
    - name: "Change file system / volume configuration (property)"
      key: "zfs set <property>=<value> $pool/${fs_vol}"
